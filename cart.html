<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="home.css">
    <title>Carrito</title>
</head>
<body >
  <nav class="navbar bg-body-tertiary">
    <div class="container">
      <a class="navbar-brand" id="home" href="/home.html" >
        <i class="material-icons" width="30" height="24">add</i>
        <p>Nuevos</p>
      </a>
      <a class="navbar-brand" id="cart" href="/cart.html">
        <i class="material-icons" width="30" height="24">shopping_cart</i>
        <p>Carrito</p>
      </a>
      <a class="navbar-brand" id="pedido" href="/pedido.html">
        <i class="material-icons" width="30" height="24">location_on</i>
        <p>Pedidos</p>
      </a>
      <a class="navbar-brand" id="perfil" href="/order.html">
        <i class="material-icons" width="30" height="24">person</i>
        <p>Perfil</p>
      </a>
      
    </div>
  </nav>
    
    <div class="container mt-4">
        <h2>Productos en el carrito</h2>
        <div id="productosCarrito"></div>
        <h3 id="total">Total: $0</h3>
        <button class="btn btn-success rounded-pill py-2 mt-2 mb-2" type="submit" id="comprar">Comprar</button>
    </div>

    <script>
        let comprar = document.getElementById("comprar");
        comprar.addEventListener("click", function(){
            if (!localStorage.getItem("carrito")) {
                alert("No hay productos en el carrito");
            } else {
              localStorage.removeItem("carrito");
              alert("Compra realizada con exito");
              location.href = "home.html";
            }
            
        })

        window.onload = function() {
            // Recuperar el carrito del localStorage
            let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
            
            // Mostrar los productos en el carrito
            let productosCarritoDiv = document.getElementById("productosCarrito");
            let total = 0;

            carrito.forEach(producto => {
                let card = document.createElement("div");
                card.classList.add("card", "mb-3");
                card.innerHTML = `
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img src="${producto.imagen}" class="img-fluid rounded-start" alt="${producto.nombre}">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">${producto.nombre}</h5>
                                <p class="card-text">${producto.descripcion}</p>
                                <p class="card-text">$${producto.precio}</p>
                            </div>
                        </div>
                    </div>
                `;
                productosCarritoDiv.appendChild(card);
                total += producto.precio;
            });

            // Mostrar el total
            document.getElementById("total").textContent = `Total: $${total}`;
        }
    </script>
      
    
   
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>