<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="home.css">
    <title>Document</title>
</head>
<body >
    <nav class="navbar bg-body-tertiary">
        <div class="container">
          <a class="navbar-brand" id="home" href="/home.html" >
            <i class="material-icons" width="30" height="24">add</i>
            <p>Nuevos</p>
          </a>
          <a class="navbar-brand" id="cart" href="/cart.html">
            <i class="material-icons" width="30" height="24">shopping_cart</i>
            <p>Carrito</p>
          </a>
          <a class="navbar-brand" id="pedido" href="/order.html">
            <i class="material-icons" width="30" height="24">location_on</i>
            <p>Pedidos</p>
          </a>
          <a class="navbar-brand" id="perfil" href="/myaccount.html">
            <i class="material-icons" width="30" height="24">person</i>
            <p>Perfil</p>
          </a>
          
        </div>
      </nav>
      <h1>Productos</h1>
      
      <script>
        let productos = [{
            id: 1,
            nombre: "Producto 1",
            descripcion: "Descripción del producto 1",
            precio: 100,
            imagen: "https://www.mil-colores.com/wp-content/uploads/52TRE3A-269_1-1.jpg"
        }, 
        {
            id: 2,
            nombre: "Producto 2",
            descripcion: "Descripción del producto 2",
            precio: 200,            
            imagen: "https://www.mil-colores.com/wp-content/uploads/52TRE3A-269_1-1.jpg"
        }, 
        {
            id: 3,
            nombre: "Producto 3",
            descripcion: "Descripción del producto 3",
            precio: 300,
            imagen: "https://www.mil-colores.com/wp-content/uploads/52TRE3A-269_1-1.jpg"
        }, 
        {
            id: 4,
            nombre: "Producto 4",
            descripcion: "Descripción del proyecto 4",
            precio: 400,
            imagen: "https://www.mil-colores.com/wp-content/uploads/52TRE3A-269_1-1.jpg"
        }, 
        {
            id: 5,
            nombre: "Producto 5",
            descripcion: "Descripción del producto 5",
            precio: 500,
            imagen: "https://www.mil-colores.com/wp-content/uploads/52TRE3A-269_1-1.jpg"
        }] 
        
            productos.forEach(producto => {
                let card = document.createElement("div");
                card.classList.add("card", "mb-3");
                card.innerHTML = `
                    <div class="row g-0" style="height: 200px;">
                      <div class="col-md-4 h-100">
                        <img src="${producto.imagen}" class="img-fluid rounded-start h-100" alt="${producto.imagen}">
                      </div>
                      <div class="col-md-8">
                        <div class="card-body">
                          <h5 class="card-title">${producto.nombre}</h5>
                          <p class="card-text">${producto.descripcion}</p>
                          <p class="card-text">${producto.precio}</p>
                          <button type="button" class="btn btn-primary" onclick="agregarAlCarrito(${producto.id})">Añadir</button>
                        </div>
                      </div>
                    </div>
                `;
                document.body.append(card);
            });

            function agregarAlCarrito(productoId) {
                // Recuperamos el carrito desde el localStorage, si ya existe
                let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
                
                // Encontramos el producto que se agregó
                let producto = productos.find(p => p.id === productoId);

                // Verificamos si el producto ya está en el carrito
                let productoEnCarrito = carrito.find(p => p.id === productoId);

                if (!productoEnCarrito) {
                    // Si el producto no está, lo agregamos
                    carrito.push(producto);
                    localStorage.setItem("carrito", JSON.stringify(carrito));
                    alert("Producto agregado al carrito");
                } else {
                    alert("Este producto ya está en el carrito");
                }
            }

            document.getElementById("cart").onclick = function () {
            location.href = "cart.html";

            document.getElementById("pedido").onclick = function () {
                location.href = "order.html";
            };

            document.getElementById("perfil").onclick = function () {
                location.href = "myaccount.html";
            };
        };
        
      </script>
   
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>